<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>pgBackRest Référence de la configuration</title><meta http-equiv="Content-Type" content="text/html;charset=utf-8"></meta><meta property="og:site_name" content="pgBackRest - Reliable PostgreSQL Backup &amp; Restore"></meta><meta property="og:title" content="pgBackRest Référence de la configuration"></meta><meta property="og:type" content="website"></meta><link rel="icon" href="favicon.png" type="image/png"></link><meta property="og:image:type" content="image/png"></meta><meta property="og:image" content="http://www.pgbackrest.org/logo.png"></meta><meta name="description" content="Ce guide de référence de la configuration {[projet]} détaille toutes les options de configuration."></meta><meta property="og:description" content="Ce guide de référence de la configuration {[projet]} détaille toutes les options de configuration."></meta><link rel="stylesheet" href="default.css" type="text/css"></link></head><body><div class="page-header"><div class="page-header-title">pgBackRest Référence de la configuration</div></div><div class="page-menu"><div class="menu-body"><div class="menu"><a class="menu-link" href="command.html">Commands</a></div></div></div><div class="page-toc"><div class="page-toc-header"><div class="page-toc-title">Table of Contents</div></div><div class="page-toc-body"><div class="section1-toc"><div class="section1-toc-number">1</div><div class="section1-toc-title"><a href="#introduction">Introduction</a></div></div><div class="section1-toc"><div class="section1-toc-number">2</div><div class="section1-toc-title"><a href="#section-archive">Archive Options (<span class="id">archive</span>)</a></div><div class="section2-toc"><div class="section2-toc-number">2.1</div><div class="section2-toc-title"><a href="#section-archive/option-archive-async">Archivage asynchrone (<span class="id">--archive-async</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">2.2</div><div class="section2-toc-title"><a href="#section-archive/option-archive-get-queue-max">Taille maximale file d'attente récupération d'Archive (<span class="id">--archive-get-queue-max</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">2.3</div><div class="section2-toc-title"><a href="#section-archive/option-archive-push-queue-max">Taille maximale de la file d'attente pour les archives (<span class="id">--archive-push-queue-max</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">2.4</div><div class="section2-toc-title"><a href="#section-archive/option-archive-timeout">Archive Délai d'attente (<span class="id">--archive-timeout</span>)</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">3</div><div class="section1-toc-title"><a href="#section-backup">Sauvegarde Options (<span class="id">backup</span>)</a></div><div class="section2-toc"><div class="section2-toc-number">3.1</div><div class="section2-toc-title"><a href="#section-backup/option-archive-check">Check Archive (<span class="id">--archive-check</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">3.2</div><div class="section2-toc-title"><a href="#section-backup/option-archive-copy">Copie des Archives (<span class="id">--archive-copy</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">3.3</div><div class="section2-toc-title"><a href="#section-backup/option-backup-standby">Sauvegarde à partir du secondaire (<span class="id">--backup-standby</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">3.4</div><div class="section2-toc-title"><a href="#section-backup/option-checksum-page">Sommes de controle des Pages (<span class="id">--checksum-page</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">3.5</div><div class="section2-toc-title"><a href="#section-backup/option-exclude">Exclusions Chemin/Fichier (<span class="id">--exclude</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">3.6</div><div class="section2-toc-title"><a href="#section-backup/option-manifest-save-threshold">Seuil sauvegarde manifeste (<span class="id">--manifest-save-threshold</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">3.7</div><div class="section2-toc-title"><a href="#section-backup/option-resume">Reprise (<span class="id">--resume</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">3.8</div><div class="section2-toc-title"><a href="#section-backup/option-start-fast">Démarrage rapide (<span class="id">--start-fast</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">3.9</div><div class="section2-toc-title"><a href="#section-backup/option-stop-auto">Arrêt Automatique (<span class="id">--stop-auto</span>)</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">4</div><div class="section1-toc-title"><a href="#section-general">General Options (<span class="id">general</span>)</a></div><div class="section2-toc"><div class="section2-toc-number">4.1</div><div class="section2-toc-title"><a href="#section-general/option-buffer-size">Taille de la mémoire tampon (<span class="id">--buffer-size</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.2</div><div class="section2-toc-title"><a href="#section-general/option-cmd-ssh">Commande client SSH (<span class="id">--cmd-ssh</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.3</div><div class="section2-toc-title"><a href="#section-general/option-compress">Compression (<span class="id">--compress</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.4</div><div class="section2-toc-title"><a href="#section-general/option-compress-level">Niveau de compression (<span class="id">--compress-level</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.5</div><div class="section2-toc-title"><a href="#section-general/option-compress-level-network">Niveau de compression réseau (<span class="id">--compress-level-network</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.6</div><div class="section2-toc-title"><a href="#section-general/option-compress-type">Type de compression (<span class="id">--compress-type</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.7</div><div class="section2-toc-title"><a href="#section-general/option-db-timeout">Timeout de la base de données (<span class="id">--db-timeout</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.8</div><div class="section2-toc-title"><a href="#section-general/option-delta">Delta (<span class="id">--delta</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.9</div><div class="section2-toc-title"><a href="#section-general/option-io-timeout">Délai d'attente E/S (<span class="id">--io-timeout</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.10</div><div class="section2-toc-title"><a href="#section-general/option-lock-path">Chemin fichier de verrouillage (<span class="id">--lock-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.11</div><div class="section2-toc-title"><a href="#section-general/option-neutral-umask">Umask neutre (<span class="id">--neutral-umask</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.12</div><div class="section2-toc-title"><a href="#section-general/option-process-max">Processus Maximum (<span class="id">--process-max</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.13</div><div class="section2-toc-title"><a href="#section-general/option-protocol-timeout">Délai d'attente au niveau Protocole (<span class="id">--protocol-timeout</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.14</div><div class="section2-toc-title"><a href="#section-general/option-sck-keep-alive">Keep Alive (<span class="id">--sck-keep-alive</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.15</div><div class="section2-toc-title"><a href="#section-general/option-spool-path">Chemin pour données transitoires (Spool) (<span class="id">--spool-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.16</div><div class="section2-toc-title"><a href="#section-general/option-tcp-keep-alive-count">Conteur Keep Alive (<span class="id">--tcp-keep-alive-count</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.17</div><div class="section2-toc-title"><a href="#section-general/option-tcp-keep-alive-idle">Temps d'inactivité Keep Alive (<span class="id">--tcp-keep-alive-idle</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.18</div><div class="section2-toc-title"><a href="#section-general/option-tcp-keep-alive-interval">Intervalle du Keep Alive (<span class="id">--tcp-keep-alive-interval</span>)</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">5</div><div class="section1-toc-title"><a href="#section-log">Log Options (<span class="id">log</span>)</a></div><div class="section2-toc"><div class="section2-toc-number">5.1</div><div class="section2-toc-title"><a href="#section-log/option-log-level-console">Niveau du journal de la console (<span class="id">--log-level-console</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">5.2</div><div class="section2-toc-title"><a href="#section-log/option-log-level-file">Niveau du journal fichier (<span class="id">--log-level-file</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">5.3</div><div class="section2-toc-title"><a href="#section-log/option-log-level-stderr">Niveau du journal pour stderr (<span class="id">--log-level-stderr</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">5.4</div><div class="section2-toc-title"><a href="#section-log/option-log-path">Emplacement du journal (<span class="id">--log-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">5.5</div><div class="section2-toc-title"><a href="#section-log/option-log-subprocess">Journalisation des sous-processus (<span class="id">--log-subprocess</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">5.6</div><div class="section2-toc-title"><a href="#section-log/option-log-timestamp">Horodatage du journal (<span class="id">--log-timestamp</span>)</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">6</div><div class="section1-toc-title"><a href="#section-repository">Dépot (Repository) Options (<span class="id">repository</span>)</a></div><div class="section2-toc"><div class="section2-toc-number">6.1</div><div class="section2-toc-title"><a href="#section-repository/option-repo-cipher-pass">Phrase de chiffrement du dépôt (<span class="id">--repo-cipher-pass</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.2</div><div class="section2-toc-title"><a href="#section-repository/option-repo-cipher-type">Type de chiffrement du dépôt (<span class="id">--repo-cipher-type</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.3</div><div class="section2-toc-title"><a href="#section-repository/option-repo-hardlink">Liens physiques Dépot (<span class="id">--repo-hardlink</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.4</div><div class="section2-toc-title"><a href="#section-repository/option-repo-host">Hôte du dépot (<span class="id">--repo-host</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.5</div><div class="section2-toc-title"><a href="#section-repository/option-repo-host-cmd">Chemin des binaires (<span class="id">--repo-host-cmd</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.6</div><div class="section2-toc-title"><a href="#section-repository/option-repo-host-config">Emplacement du fichier de configuration (<span class="id">--repo-host-config</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.7</div><div class="section2-toc-title"><a href="#section-repository/option-repo-host-config-include-path">Chemin d'inclusion de la configuration (<span class="id">--repo-host-config-include-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.8</div><div class="section2-toc-title"><a href="#section-repository/option-repo-host-config-path">Chemin de configuration (<span class="id">--repo-host-config-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.9</div><div class="section2-toc-title"><a href="#section-repository/option-repo-host-port">Port de l'hôte du dépôt (<span class="id">--repo-host-port</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.10</div><div class="section2-toc-title"><a href="#section-repository/option-repo-host-user">Utilisateur de l'hôte du dépôt (<span class="id">--repo-host-user</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.11</div><div class="section2-toc-title"><a href="#section-repository/option-repo-path">Chemin d'accès du Dépots (<span class="id">--repo-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.12</div><div class="section2-toc-title"><a href="#section-repository/option-repo-retention-archive">Rétention d'Archive (<span class="id">--repo-retention-archive</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.13</div><div class="section2-toc-title"><a href="#section-repository/option-repo-retention-archive-type">Type Rétention Archive (<span class="id">--repo-retention-archive-type</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.14</div><div class="section2-toc-title"><a href="#section-repository/option-repo-retention-diff">Rétention Différentielle (<span class="id">--repo-retention-diff</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.15</div><div class="section2-toc-title"><a href="#section-repository/option-repo-retention-full">Rétention Complète (<span class="id">--repo-retention-full</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.16</div><div class="section2-toc-title"><a href="#section-repository/option-repo-retention-full-type">Type de rétention Complète (<span class="id">--repo-retention-full-type</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.17</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-bucket">S3 Bucket (<span class="id">--repo-s3-bucket</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.18</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-ca-file">Fichier SSL CA S3 (<span class="id">--repo-s3-ca-file</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.19</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-ca-path">Chemin SSL CA (<span class="id">--repo-s3-ca-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.20</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-endpoint">Point de terminaison S3 (<span class="id">--repo-s3-endpoint</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.21</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-host">Hôte S3 (<span class="id">--repo-s3-host</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.22</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-key">Clé d'accès S3 (<span class="id">--repo-s3-key</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.23</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-key-secret">Clé d'accès secrète S3 (<span class="id">--repo-s3-key-secret</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.24</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-port">Port S3 (<span class="id">--repo-s3-port</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.25</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-region">Région S3 (<span class="id">--repo-s3-region</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.26</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-token">Jeton de sécurité pour le dépôt S3 (<span class="id">--repo-s3-token</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.27</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-uri-style">S3 Formats d'URI (<span class="id">--repo-s3-uri-style</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.28</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-verify-tls">S3 Vérifiction TLS (<span class="id">--repo-s3-verify-tls</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.29</div><div class="section2-toc-title"><a href="#section-repository/option-repo-type">Type de dépot (<span class="id">--repo-type</span>)</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">7</div><div class="section1-toc-title"><a href="#section-restore">Restore Options (<span class="id">restore</span>)</a></div><div class="section2-toc"><div class="section2-toc-number">7.1</div><div class="section2-toc-title"><a href="#section-restore/option-db-include">Inclure la base de données (<span class="id">--db-include</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">7.2</div><div class="section2-toc-title"><a href="#section-restore/option-link-all">Tous Liens synboliques (<span class="id">--link-all</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">7.3</div><div class="section2-toc-title"><a href="#section-restore/option-link-map">Mappage liens symboliques (<span class="id">--link-map</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">7.4</div><div class="section2-toc-title"><a href="#section-restore/option-recovery-option">Option Récuperation (<span class="id">--recovery-option</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">7.5</div><div class="section2-toc-title"><a href="#section-restore/option-tablespace-map">Mappage Tablespace (<span class="id">--tablespace-map</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">7.6</div><div class="section2-toc-title"><a href="#section-restore/option-tablespace-map-all">Remappage Tous Tablespaces (<span class="id">--tablespace-map-all</span>)</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">8</div><div class="section1-toc-title"><a href="#section-stanza">Stanza Options (<span class="id">stanza</span>)</a></div><div class="section2-toc"><div class="section2-toc-number">8.1</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-host">Hôte PostgreSQL (<span class="id">--pg-host</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.2</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-host-cmd">Hôte PostgreSQL Commande (<span class="id">--pg-host-cmd</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.3</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-host-config">Hôte PostgreSQL Configuration (<span class="id">--pg-host-config</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.4</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-host-config-include-path">Hôte PostgreSQL Chemin inclusion Configuration (<span class="id">--pg-host-config-include-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.5</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-host-config-path">Hôte PostgreSQL Chemin Configuration (<span class="id">--pg-host-config-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.6</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-host-port">Hôte PostgreSQL Port (<span class="id">--pg-host-port</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.7</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-host-user">Hôte PostgreSQL Utilisateur (<span class="id">--pg-host-user</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.8</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-path">PostgreSQL Chemin (<span class="id">--pg-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.9</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-port">PostgreSQL Port (<span class="id">--pg-port</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.10</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-socket-path">PostgreSQL Emplacement Socket Unix (<span class="id">--pg-socket-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.11</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-user">PostgreSQL Utilisateur Base de données (<span class="id">--pg-user</span>)</a></div></div></div></div></div><div class="page-body"><div class="section1"><a id="introduction"></a><div class="section1-header"><div class="section1-number">1</div><div class="section1-title">Introduction</div></div><div class="section-intro"><span class="backrest">pgBackRest</span> peut être utilisé entièrement avec les paramètres de la ligne de commande mais un fichier de configuration est plus pratique pour les installations complexes ou comportant beaucoup d'options. L'emplacement par défaut du fichier de configuration est <span class="file">/etc/pgbackrest/pgbackrest.conf</span>. Si aucun fichier n'existe à cet emplacement, l'ancienne valeur par défaut <span class="file">/etc/pgbackrest.conf</span> sera alors utilisée.</div><div class="section-body"></div></div><div class="section1"><a id="section-archive"></a><div class="section1-header"><div class="section1-number">2</div><div class="section1-title">Archive Options (<span class="id">archive</span>)</div></div><div class="section-intro">La section <span class="br-setting">archive</span> définit les options des commandes <span class="cmd">archive-push</span> et <span class="cmd">archive-get</span>.</div><div class="section-body"><div class="section2"><a id="section-archive/option-archive-async"></a><div class="section2-header"><div class="section2-number">2.1</div><div class="section2-title">Archivage asynchrone (<span class="id">--archive-async</span>)</div></div><div class="section-body"><div class="section-body-text">Pousser et obtenir des segments WAL de manière asynchrone.</div><div class="section-body-text">Permet d'activer un fonctionnement asynchrone pour les commandes <span class="cmd">archive-push</span> et <span class="cmd">archive-get</span>.<br/>
<br/>
Le fonctionnement asynchrone est plus performant car il permet de réutiliser les connexions et de tirer parti du parallélisme. Consultez les options <span class="br-option">spool-path</span>, <span class="br-option">archive-get-queue-max</span>, et <span class="br-option">archive-push-queue-max</span> pour plus d'informations.</div><pre class="code-block">default: n
example: archive-async=y</pre></div></div><div class="section2"><a id="section-archive/option-archive-get-queue-max"></a><div class="section2-header"><div class="section2-number">2.2</div><div class="section2-title">Taille maximale file d'attente récupération d'Archive (<span class="id">--archive-get-queue-max</span>)</div></div><div class="section-body"><div class="section-body-text">Taille maximale de la file d'attente <span class="backrest">pgBackRest</span> archive-get.</div><div class="section-body-text">Spécifie la taille maximale de la file d'attente <span class="cmd">archive-get</span> lorsque <span class="br-option">archive-async</span> est activée. La file d'attente est stockée sur l'emplacement définit par <span class="br-option">spool-path</span> et est utilisée pour accélérer la réception des données de WAL par <span class="postgres">PostgreSQL</span>.<br/>
<br/>
La taille peut être saisie en octets (par défaut) ou en KB, MB, GB, TB ou PB où le multiplicateur est une puissance de 1024.</div><pre class="code-block">default: 134217728
allowed: 0-4503599627370496
example: archive-get-queue-max=1073741824</pre></div></div><div class="section2"><a id="section-archive/option-archive-push-queue-max"></a><div class="section2-header"><div class="section2-number">2.3</div><div class="section2-title">Taille maximale de la file d'attente pour les archives (<span class="id">--archive-push-queue-max</span>)</div></div><div class="section-body"><div class="section-body-text">Taille maximale de la file d'attente <span class="postgres">PostgreSQL</span> archive..</div><div class="section-body-text">Une fois la limite atteinte, voici ce qui se produira :<br/>
<ol><li><span class="backrest">pgBackRest</span> signalera à <span class="postgres">PostgreSQL</span> que les journaux de transaction (WAL) ont été archivée avec succès, puis, <b>LES SUPPRIMES</b>.</li><li>Un avertissement sera émis dans le journal de trace de <span class="postgres">PostgreSQL</span>.</li></ol>Si cela se produit, le flux d'archives sera interrompu et le PITR ne sera plus possible au-delà de ce moment. Une nouvelle sauvegarde est alors indispensable pour retrouver la fonctionnalité de restauration complète.<br/>
<br/>
En mode asynchrone, la totalité de la file d'attente sera supprimée afin d'éviter que des flots de WAL ne passent avant que la limite de la file ne soit à nouveau dépassée.<br/>
<br/>
Le but de cette fonction est d'éviter que le disque utilisé pour le stockage du journal (pg_wal ou pg_log) ne se remplisse, ce qui entraînerait l'arrêt complet de l'instance <span class="postgres">PostgreSQL</span>. Il est peut être préférable de perdre la sauvegarde que d'avoir <span class="postgres">PostgreSQL</span> s'arrêter.<br/>
<br/>
La taille peut être saisie en octets (par défaut) ou en KB, MB, GB, TB ou PB où le multiplicateur est une puissance de 1024.</div><pre class="code-block">allowed: 0-4503599627370496
example: archive-push-queue-max=1GB</pre><div class="section-body-text">Nom obsolète: archive-queue-max</div></div></div><div class="section2"><a id="section-archive/option-archive-timeout"></a><div class="section2-header"><div class="section2-number">2.4</div><div class="section2-title">Archive Délai d'attente (<span class="id">--archive-timeout</span>)</div></div><div class="section-body"><div class="section-body-text">Délai d'attente de l'archivage (archive timeout).</div><div class="section-body-text">Définit le temps maximum, en secondes, à attendre pour que chaque segment WAL atteigne le dépôt d'archives de <span class="backrest">pgBackRest</span>. Le délai s'applique aux commandes <span class="cmd">check</span> et <span class="cmd">backup</span> lorsqu'on attend que les segments WAL nécessaires à la cohérence de la sauvegarde soient archivés.</div><pre class="code-block">default: 60
allowed: 0.1-86400
example: archive-timeout=30</pre></div></div></div></div><div class="section1"><a id="section-backup"></a><div class="section1-header"><div class="section1-number">3</div><div class="section1-title">Sauvegarde Options (<span class="id">backup</span>)</div></div><div class="section-intro">La section <span class="br-setting">backup</span> définit les paramètres relatifs à la sauvegarde.</div><div class="section-body"><div class="section2"><a id="section-backup/option-archive-check"></a><div class="section2-header"><div class="section2-number">3.1</div><div class="section2-title">Check Archive (<span class="id">--archive-check</span>)</div></div><div class="section-body"><div class="section-body-text">Contrôle que les segments WAL se trouvent bien dans les archives à la fin du processus de sauvegarde.</div><div class="section-body-text">Contrôle que tous les segments de WAL nécessaires pour rendre la sauvegarde cohérente sont présents dans les archives de WAL. Il est conseillé de laisser ce paramètre par défaut, à moins que vous n'utilisiez une autre méthode d'archivage..<br/>
<br/>
Cette option doit être activée si <span class="br-option">archive-copy</span> est activé.</div><pre class="code-block">default: y
example: archive-check=n</pre></div></div><div class="section2"><a id="section-backup/option-archive-copy"></a><div class="section2-header"><div class="section2-number">3.2</div><div class="section2-title">Copie des Archives (<span class="id">--archive-copy</span>)</div></div><div class="section-body"><div class="section-body-text">Copier tous les segments WAL nécessaires à la cohérence de la sauvegarde.</div><div class="section-body-text">Cette option un peu parano protège contre la corruption dans les archives des segments WAL en stockant les segments WAL nécessaires à la cohérence directement dans la sauvegarde. Les segments WAL sont toujours stockés dans l'archive, donc cette option utilisera de l'espace supplémentaire.<br/>
<br/>
Lors de la restauration, les segments WAL seront présents dans <span class="path">pg_xlog/pg_wal</span> et <span class="postgres">PostgreSQL</span> les utilisera de préférence plutôt que d'appeler la <span class="id">restore_command</span>.<br/>
<br/>
L'option <span class="br-option">archive-check</span> doit être activée si <span class="br-option">archive-copy</span> est activée</div><pre class="code-block">default: n
example: archive-copy=y</pre></div></div><div class="section2"><a id="section-backup/option-backup-standby"></a><div class="section2-header"><div class="section2-number">3.3</div><div class="section2-title">Sauvegarde à partir du secondaire (<span class="id">--backup-standby</span>)</div></div><div class="section-body"><div class="section-body-text">Sauvegarde depuis l'instance standby secondaire.</div><div class="section-body-text">Activer la sauvegarde depuis le secondaire en standby pour réduire la charge sur l'instance primaire. Cette option nécessite que les hôtes <span class="host">primary</span> (primaire) et <span class="host">standby</span> (secondaire en standby) soit correctement configurés.</div><pre class="code-block">default: n
example: backup-standby=y</pre></div></div><div class="section2"><a id="section-backup/option-checksum-page"></a><div class="section2-header"><div class="section2-number">3.4</div><div class="section2-title">Sommes de controle des Pages (<span class="id">--checksum-page</span>)</div></div><div class="section-body"><div class="section-body-text">Validation des sommes de contrôle des pages de données (checksums).</div><div class="section-body-text">Permet à <span class="backrest">pgBackRest</span> de valider toutes les sommes de contrôle des pages de données pendant la sauvegarde de l'instance. Cette option est automatiquement activée lorsque les sommes de contrôle des pages de données sont activées sur l'instance.<br/>
<br/>
Un échec dans la validation de la somme de contrôle n'annulera pas la sauvegarde. Au contraire, des avertissements seront émis dans le journal des traces (et par défaut sur la console); la liste des pages non valides sera stockée dans le manifeste de sauvegarde.</div><pre class="code-block">example: checksum-page=n</pre></div></div><div class="section2"><a id="section-backup/option-exclude"></a><div class="section2-header"><div class="section2-number">3.5</div><div class="section2-title">Exclusions Chemin/Fichier (<span class="id">--exclude</span>)</div></div><div class="section-body"><div class="section-body-text">Exclusion des chemins/fichiers de la sauvegarde..</div><div class="section-body-text">Toutes les exclusions sont relatives à <span class="path">$PGDATA</span>. Si l'exclusion se termine par / alors seuls les fichiers du répertoire spécifié seront exclus, par exemple <span class="br-option">--exclude=junk/</span> exclura tous les fichiers du répertoire <span class="path">$PGDATA/junk</span> mais inclura le répertoire lui-même. Si l'exclusion ne se termine pas par / alors le fichier peut correspondre exactement à l'exclusion ou correspondre à / apposé à l'exclusion, par exemple <span class="br-option">--exclude=junk</span> exclura le répertoire <span class="path">$PGDATA/junk</span> et tous les fichiers qu'il contient.<br/>
<br/>
<b>Soyez prudent en utilisant cette fonctionnalité : il est très rapide d'exclure quelque chose d'essentiel qui rendra la sauvegarde incohérente. Assurez-vous de tester vos restaurations ! </b><br/>
<br/>
Tous les fichiers exclus seront journalisés au niveau <span class="id">info</span> avec la règle d'exclusion.Veillez à vérifier la liste des fichiers exclus pour vous assurer que rien d'inattendu n'est exclu.<div class="admonition"><div class="note">NOTE:</div><div class="note-text">Les exclusions ne sont pas prises en compte lors des restaurations delta. Tout fichier/répertoire qui a été exclu par la sauvegarde sera <i>supprimé</i> lors de la restauration delta.</div></div>Cette option ne doit pas être utilisée pour exclure les journaux de traces <span class="postgres">PostgreSQL</span> d'une sauvegarde. Les journaux peuvent être déplacés hors du répertoire <span class="id">PGDATA</span> en utilisant le paramètre <span class="postgres">PostgreSQL</span> <span class="br-setting">log_directory</span>, ce qui présente l'avantage de permettre la préservation des journaux après une restauration.<br/>
<br/>
Les exclusions multiples peuvent être spécifiées sur la ligne de commande ou dans le fichier de configuration.</div><pre class="code-block">example: exclude=junk/</pre></div></div><div class="section2"><a id="section-backup/option-manifest-save-threshold"></a><div class="section2-header"><div class="section2-number">3.6</div><div class="section2-title">Seuil sauvegarde manifeste (<span class="id">--manifest-save-threshold</span>)</div></div><div class="section-body"><div class="section-body-text">Seuil de déclenchement de la sauvegarde du manifeste lors de la sauvegarde.</div><div class="section-body-text">Définit la fréquence à laquelle le manifeste sera sauvegardé lors d'une sauvegarde. La sauvegarde du manifeste est importante car elle permet de stocker les sommes de contrôle et de faire fonctionner efficacement la fonction de reprise. Le volume réel utilisé est de 1 % de la taille de la sauvegarde ou <span class="br-setting">manifest-save-threshold</span>, la valeur la plus élevée étant retenue.<br/>
<br/>
La taille peut être saisie en octets (par défaut) ou en KB, MB, GB, TB, ou PB où le multiplicateur est une puissance de 1024.</div><pre class="code-block">default: 1073741824
allowed: 1-1099511627776
example: manifest-save-threshold=5G</pre></div></div><div class="section2"><a id="section-backup/option-resume"></a><div class="section2-header"><div class="section2-number">3.7</div><div class="section2-title">Reprise (<span class="id">--resume</span>)</div></div><div class="section-body"><div class="section-body-text">Permettre la reprise d'une sauvegarde échoué</div><div class="section-body-text">Définit si la fonctionnalité de reprise est activée. La reprise peut réduire considérablement le temps nécessaire pour exécuter une sauvegarde si une sauvegarde précédente du même type a échoué. Elle ajoute toutefois de la complexité, de sorte qu'il peut être conseillé de la désactiver dans les environnements qui n'ont pas besoin de cette fonction.</div><pre class="code-block">default: y
example: resume=n</pre></div></div><div class="section2"><a id="section-backup/option-start-fast"></a><div class="section2-header"><div class="section2-number">3.8</div><div class="section2-title">Démarrage rapide (<span class="id">--start-fast</span>)</div></div><div class="section-body"><div class="section-body-text">Forcer un point de contrôle (checkpoint) pour lancer plus rapidement la sauvegarde.</div><div class="section-body-text">Force un point de contrôle (en passant le paramètre <span class="id">y</span> à <span class="id">fast</span> de <span class="id">pg_start_backup()</span>) pour que la sauvegarde commence immédiatement. Sinon, la sauvegarde commencera après le prochain point de contrôle contrôle.<br/>
<br/>
Cette fonction ne fonctionne qu'à partir de <span class="postgres">PostgreSQL</span> version >= <span class="id">8.4</span>.</div><pre class="code-block">default: n
example: start-fast=y</pre></div></div><div class="section2"><a id="section-backup/option-stop-auto"></a><div class="section2-header"><div class="section2-number">3.9</div><div class="section2-title">Arrêt Automatique (<span class="id">--stop-auto</span>)</div></div><div class="section-body"><div class="section-body-text">Arrêt d'une sauvegarde antérieure défaillante lors la nouvelle sauvegarde.</div><div class="section-body-text">Cette opération ne sera effectuée que si un verrouillage consultatif exclusif peut être acquis afin de faire la preuve que le processus de sauvegarde antérieur ayant échoué s'est réellement arrêté.<br/>
<br/>
Cette fonctionnalité repose sur pg_is_in_backup() et ne fonctionne donc qu'avec <span class="postgres">PostgreSQL</span> >= <span class="id">9.3</span>.<br/>
<br/>
Cette fonctionnalité n'est pas prise en charge pour <span class="postgres">PostgreSQL</span> >= <span class="id">9.6</span> car les sauvegardes sont exécutées en mode non exclusif.<br/>
<br/>
Ce paramètre est désactivé par défaut car il suppose que <span class="backrest">pgBackRest</span> est le seul processus qui effectue exclusivement des sauvegardes en ligne. Il se base sur un verrou consultatif que seul <span class="backrest">pgBackRest</span> définit afin de pouvoir interrompre les autres processus qui effectuent des sauvegardes exclusives en ligne. Notez que <span class="cmd">base_backup</span> et <span class="cmd">pg_dump</span> sont sans risque avec ce paramétrage car ils n'appellent pas <span class="id">pg_start_backup()</span> et ne sont donc pas exclusifs.</div><pre class="code-block">default: n
example: stop-auto=y</pre></div></div></div></div><div class="section1"><a id="section-general"></a><div class="section1-header"><div class="section1-number">4</div><div class="section1-title">General Options (<span class="id">general</span>)</div></div><div class="section-intro">La section <span class="br-setting">general</span> définit les options qui sont communes à de nombreuses commandes.</div><div class="section-body"><div class="section2"><a id="section-general/option-buffer-size"></a><div class="section2-header"><div class="section2-number">4.1</div><div class="section2-title">Taille de la mémoire tampon (<span class="id">--buffer-size</span>)</div></div><div class="section-body"><div class="section-body-text">Taille de la mémoire tampon pour les opérations sur les fichiers.</div><div class="section-body-text">Définissez la taille de la mémoire tampon utilisée pour les opérations de copie, de compression et de décompression. Un maximum de 3 tampons seront utilisés à la fois par processus. Un maximum supplémentaire de 256K par processus peut être utilisé pour les tampons zlib.<br/>
<br/>
La taille peut être saisie en octets (par défaut) ou en KB, MB, GB, TB, ou PB où le multiplicateur est une puissance de 1024. Par exemple, la valeur insensible à la casse 32k (ou 32KB) peut être utilisée au lieu de 32768.<br/>
<br/>
Les valeurs autorisées, en octets, sont<span class="id">16384</span>, <span class="id">32768</span>, <span class="id">65536</span>, <span class="id">131072</span>, <span class="id">262144</span>, <span class="id">524288</span>, <span class="id">1048576</span>, <span class="id">2097152</span>, <span class="id">4194304</span>, <span class="id">8388608</span>, et <span class="id">16777216</span>.</div><pre class="code-block">default: 1048576
example: buffer-size=32K</pre></div></div><div class="section2"><a id="section-general/option-cmd-ssh"></a><div class="section2-header"><div class="section2-number">4.2</div><div class="section2-title">Commande client SSH (<span class="id">--cmd-ssh</span>)</div></div><div class="section-body"><div class="section-body-text">Chemin d'accès à l'exécutable du client ssh.</div><div class="section-body-text">Utilisez un client SSH spécifique lorsqu'une alternative est nécessaire ou lorsque l'exécutable <span class="file">ssh</span> n'est pas dans $PATH.</div><pre class="code-block">default: ssh
example: cmd-ssh=/usr/bin/ssh</pre></div></div><div class="section2"><a id="section-general/option-compress"></a><div class="section2-header"><div class="section2-number">4.3</div><div class="section2-title">Compression (<span class="id">--compress</span>)</div></div><div class="section-body"><div class="section-body-text">Utilisez la compression de fichiers.</div><div class="section-body-text">Les fichiers de sauvegarde sont compatibles avec les outils de compression en ligne de commande.<br/>
<br/>
Cette option est désormais obsolète. L'option <span class="br-setting">compress-type</span> doit être utilisée à la place.</div><pre class="code-block">default: y
example: compress=n</pre></div></div><div class="section2"><a id="section-general/option-compress-level"></a><div class="section2-header"><div class="section2-number">4.4</div><div class="section2-title">Niveau de compression (<span class="id">--compress-level</span>)</div></div><div class="section-body"><div class="section-body-text">Niveau de compression des fichiers.</div><div class="section-body-text">Définit le niveau à utiliser pour la compression des fichiers lorsque <span class="br-setting">compress-type</span> n'est pas égal à <span class="id">none</span> ou <span class="br-setting">compress=y</span> (déprécié).</div><pre class="code-block">allowed: 0-9
example: compress-level=9</pre></div></div><div class="section2"><a id="section-general/option-compress-level-network"></a><div class="section2-header"><div class="section2-number">4.5</div><div class="section2-title">Niveau de compression réseau (<span class="id">--compress-level-network</span>)</div></div><div class="section-body"><div class="section-body-text">Niveau de compression du réseau.</div><div class="section-body-text">Définit le niveau de compression sur le réseau, lorsque <span class="br-setting">compress-type=none</span> et que la commande n'est pas exécutée sur le même hôte que le dépôt. La compression est utilisée pour réduire le trafic réseau mais peut être désactivée en définissant <span class="br-setting">compress-level-network=0</span>. Lorsque <span class="br-setting">compress-type</span> n'est pas égal à <span class="id">none</span>, le paramètre <span class="br-setting">compress-level-network</span> est ignoré et <span class="br-setting">compress-level</span> est utilisé à la place de sorte que le fichier ne soit compressé qu'une seule fois. La compression SSH est toujours désactivée.</div><pre class="code-block">default: 3
allowed: 0-9
example: compress-level-network=1</pre></div></div><div class="section2"><a id="section-general/option-compress-type"></a><div class="section2-header"><div class="section2-number">4.6</div><div class="section2-title">Type de compression (<span class="id">--compress-type</span>)</div></div><div class="section-body"><div class="section-body-text">Type de compression pour les fichiers.</div><div class="section-body-text">Les types de compression suivants sont pris en charge :<br/>
<ul><li><span class="id">bz2</span> - format de compression bzip2</li><li><span class="id">gz</span> - format de compression gzip</li><li><span class="id">lz4</span> - format de compression lz4 (non disponible sur toutes les plateformes)</li><li><span class="id">zst</span> - format de compression Zstandard (non disponible sur toutes les plateformes)</li></ul></div><pre class="code-block">default: gz
example: compress-type=n</pre></div></div><div class="section2"><a id="section-general/option-db-timeout"></a><div class="section2-header"><div class="section2-number">4.7</div><div class="section2-title">Timeout de la base de données (<span class="id">--db-timeout</span>)</div></div><div class="section-body"><div class="section-body-text">Délai d'attente des requêtes à la base de données.</div><div class="section-body-text">Définit le délai d'attente, en secondes, pour les interrogations de la base de données. Cela inclut les fonctions <span class="id">pg_start_backup()</span> et <span class="id">pg_stop_backup()</span> qui peuvent chacune prendre un temps considérable. C'est pourquoi le délai d'attente doit être maintenu à un niveau élevé, sauf si vous savez que ces fonctions retourneront rapidement (c'est-à-dire si vous avez défini <span class="br-setting">startfast=y</span> et que vous savez que l'instance de base de données ne générera pas beaucoup de segments WAL pendant la sauvegarde). <div class="admonition"><div class="note">NOTE:</div><div class="note-text">L'option <span class="br-option">db-timeout</span> doit être inférieure à l'option <span class="br-option">protocol-timeout</span>.</div></div></div><pre class="code-block">default: 1800
allowed: 0.1-604800
example: db-timeout=600</pre></div></div><div class="section2"><a id="section-general/option-delta"></a><div class="section2-header"><div class="section2-number">4.8</div><div class="section2-title">Delta (<span class="id">--delta</span>)</div></div><div class="section-body"><div class="section-body-text">Restauration ou sauvegarde à l'aide de sommes de contrôle.</div><div class="section-body-text">Lors d'une restauration, par défaut, les répertoires <span class="postgres">PostgreSQL</span> data et tablespace sont censés être présents mais vides. Cette option effectue une restauration delta en utilisant des sommes de contrôle.<br/>
<br/>
Lors d'une sauvegarde, cette option utilisera les sommes de contrôle au lieu des horodatages pour déterminer si les fichiers devront être copiés.</div><pre class="code-block">default: n
example: delta=y</pre></div></div><div class="section2"><a id="section-general/option-io-timeout"></a><div class="section2-header"><div class="section2-number">4.9</div><div class="section2-title">Délai d'attente E/S (<span class="id">--io-timeout</span>)</div></div><div class="section-body"><div class="section-body-text">Délai d'attente E/S.</div><div class="section-body-text">Délai d'attente, en secondes, utilisé pour les connexions et les opérations de lecture/écriture.<br/>
<br/>
Notez que l'ensemble de l'opération de lecture/écriture n'a pas besoin de se terminer dans ce délai mais une <i>progression</i> doit être constatée, même s'il ne s'agit que d'un seul octet.</div><pre class="code-block">default: 60
allowed: 0.1-3600
example: io-timeout=120</pre></div></div><div class="section2"><a id="section-general/option-lock-path"></a><div class="section2-header"><div class="section2-number">4.10</div><div class="section2-title">Chemin fichier de verrouillage (<span class="id">--lock-path</span>)</div></div><div class="section-body"><div class="section-body-text">Chemin d'accès où sont stockés les fichiers de verrouillage.</div><div class="section-body-text">Le chemin de verrouillage fournit l'emplacement à <span class="backrest">pgBackRest</span> pour créer des fichiers de verrouillage afin d'éviter que des opérations en conflictuelles ne soient exécutées simultanément.</div><pre class="code-block">default: /tmp/pgbackrest
example: lock-path=/backup/db/lock</pre></div></div><div class="section2"><a id="section-general/option-neutral-umask"></a><div class="section2-header"><div class="section2-number">4.11</div><div class="section2-title">Umask neutre (<span class="id">--neutral-umask</span>)</div></div><div class="section-body"><div class="section-body-text">Utilisation d'un <q>umask</q> neutre</div><div class="section-body-text">Définit l'umask à 0000 pour que les modes dans le dépôt de sauvegarde soient créés de manière appropriée. Le mode par défaut du répertoire est 0750 et le mode par défaut du fichier est 0640. Pour les répertoires lock et log, les modes de répertoire et de fichier sont respectivement fixés à 0770 et 0660.<br/>
<br/>
Pour utiliser l'umask de l'utilisateur en cours d'exécution, spécifiez plutôt <span class="br-setting">neutral-umask=n</span> dans le fichier de configuration ou <span class="br-setting">--no-neutral-umask</span> sur la ligne de commande.</div><pre class="code-block">default: y
example: neutral-umask=n</pre></div></div><div class="section2"><a id="section-general/option-process-max"></a><div class="section2-header"><div class="section2-number">4.12</div><div class="section2-title">Processus Maximum (<span class="id">--process-max</span>)</div></div><div class="section-body"><div class="section-body-text">Nombre de processus maximal lors utilisé lors de la compression et du transfert.</div><div class="section-body-text">Chaque processus effectuera une compression et un transfert pour que la commande s'exécute plus rapidement, mais ne réglez pas <span class="br-setting">process-max</span> à un niveau si élevé que cela affecte les performances de la base de données.</div><pre class="code-block">default: 1
allowed: 1-999
example: process-max=4</pre></div></div><div class="section2"><a id="section-general/option-protocol-timeout"></a><div class="section2-header"><div class="section2-number">4.13</div><div class="section2-title">Délai d'attente au niveau Protocole (<span class="id">--protocol-timeout</span>)</div></div><div class="section-body"><div class="section-body-text">Délai d'attente du protocole.</div><div class="section-body-text">Définit le délai, en secondes, durant lequel le processus local ou distant attendra qu'un nouveau message soit reçu au niveau de la couche protocole. Cela permet d'éviter que les processus n'attendent indéfiniment un message. <div class="admonition"><div class="note">NOTE:</div><div class="note-text">L'option <span class="br-option">protocol-timeout</span> doit être supérieure à celle de <span class="br-option">db-timeout</span> option.</div></div></div><pre class="code-block">default: 1830
allowed: 0.1-604800
example: protocol-timeout=630</pre></div></div><div class="section2"><a id="section-general/option-sck-keep-alive"></a><div class="section2-header"><div class="section2-number">4.14</div><div class="section2-title">Keep Alive (<span class="id">--sck-keep-alive</span>)</div></div><div class="section-body"><div class="section-body-text">Activation de la fonction de keep-alive (maintien en vie).</div><div class="section-body-text">Activation des messages de keep-alive (maintien en vie) sur les connexions réseaux.</div><pre class="code-block">default: y
example: sck-keep-alive=n</pre></div></div><div class="section2"><a id="section-general/option-spool-path"></a><div class="section2-header"><div class="section2-number">4.15</div><div class="section2-title">Chemin pour données transitoires (Spool) (<span class="id">--spool-path</span>)</div></div><div class="section-body"><div class="section-body-text">Chemin où les données transitoires sont stockées.</div><div class="section-body-text">Ce chemin est utilisé pour stocker les données nécessaires à la commande asynchrone <span class="cmd">archive-push</span> et <span class="cmd">archive-get</span>.<br/>
<br/>
La commande asynchrone <span class="cmd">archive-push</span> enregistre des accusés de réception dans le chemin du spool lorsqu'elle a stocké avec succès le WAL dans l'archive (et des erreurs en cas d'échec) afin que le processus de premier plan puisse rapidement notifier <span class="postgres">PostgreSQL</span>. Les fichiers d'accusés de réception sont très petits (zéro octets en cas de succès et quelques centaines d'octets en cas d'erreur).<br/>
<br/>
La commande asynchrone <span class="cmd">archive-get</span> met en file d'attente le WAL dans le chemin du spool afin qu'il puisse être fourni très rapidement lorsque <span class="postgres">PostgreSQL</span> le demande. Le déplacement de fichiers vers <span class="postgres">PostgreSQL</span> est plus efficace lorsque le chemin du spool se trouve sur le même système de fichiers que <span class="path">pg_xlog</span>/<span class="path">pg_wal</span>.<br/>
<br/>
Les données stockées dans le chemin du spool ne sont pas réellement temporaires puisqu'elles peuvent et doivent survivre à un redémarrage. Cependant, la perte des données dans le chemin du spool n'est pas un problème. <span class="backrest">pgBackRest</span> va simplement revérifier chaque segment WAL pour s'assurer qu'il est bien archivé pour <span class="cmd">archive-push</span> et reconstruire la file d'attente pour <span class="cmd">archive-get</span>.<br/>
<br/>
Le chemin du spool est destiné à être situé sur un système de fichiers local compatible Posix, et non sur un système de fichiers distant tel que <span class="host">NFS</span> ou <span class="host">CIFS</span>.</div><pre class="code-block">default: /var/spool/pgbackrest
example: spool-path=/backup/db/spool</pre></div></div><div class="section2"><a id="section-general/option-tcp-keep-alive-count"></a><div class="section2-header"><div class="section2-number">4.16</div><div class="section2-title">Conteur Keep Alive (<span class="id">--tcp-keep-alive-count</span>)</div></div><div class="section-body"><div class="section-body-text">Compteur Keep-alive.</div><div class="section-body-text">Spécifie le nombre de messages TCP à garder en mémoire qui peuvent être perdus avant que la connexion ne soit considérée comme morte.<br/>
<br/>
Cette option n'est disponible que sur les systèmes qui prennent en charge l'option réseau <span class="id">TCP_KEEPCNT</span>.</div><pre class="code-block">allowed: 1-32
example: tcp-keep-alive-count=3</pre></div></div><div class="section2"><a id="section-general/option-tcp-keep-alive-idle"></a><div class="section2-header"><div class="section2-number">4.17</div><div class="section2-title">Temps d'inactivité Keep Alive (<span class="id">--tcp-keep-alive-idle</span>)</div></div><div class="section-body"><div class="section-body-text">Temps d'inactivité du keepalive.</div><div class="section-body-text">Spécifie la durée (en secondes) sans activité du réseau après laquelle le système d'exploitation doit envoyer un message TCP de maintien en activité (keep-alive).<br/>
<br/>
Cette option n'est disponible que sur les systèmes qui prennent en charge l'option réseau <span class="id">TCP_KEEPIDLE</span>.</div><pre class="code-block">allowed: 1-3600
example: tcp-keep-alive-idle=60</pre></div></div><div class="section2"><a id="section-general/option-tcp-keep-alive-interval"></a><div class="section2-header"><div class="section2-number">4.18</div><div class="section2-title">Intervalle du Keep Alive (<span class="id">--tcp-keep-alive-interval</span>)</div></div><div class="section-body"><div class="section-body-text">Temps d'intervalle de maintien en vie (keep-alive).</div><div class="section-body-text">Spécifie le temps (en secondes) après lequel un message TCP de maintien en activité (keep-alive) non acquitté doit être retransmis.<br/>
<br/>
Cette option n'est disponible que sur les systèmes qui prennent en charge l'option réseau <span class="id">TCP_KEEPINTVL</span>.</div><pre class="code-block">allowed: 1-900
example: tcp-keep-alive-interval=30</pre></div></div></div></div><div class="section1"><a id="section-log"></a><div class="section1-header"><div class="section1-number">5</div><div class="section1-title">Log Options (<span class="id">log</span>)</div></div><div class="section-intro">La section <span class="br-setting">log</span> définit les paramètres liés à la journalisation des traces.<div class="admonition"><div class="caution">CAUTION:</div><div class="caution-text">Cette journalisation peut révéler des informations sensibles telles que des clés et des mots de passe. À utiliser donc avec prudence !</div></div></div><div class="section-body"><div class="section2"><a id="section-log/option-log-level-console"></a><div class="section2-header"><div class="section2-number">5.1</div><div class="section2-title">Niveau du journal de la console (<span class="id">--log-level-console</span>)</div></div><div class="section-body"><div class="section-body-text">Niveau de journalisation en sortie sur la console.</div><div class="section-body-text">Les niveaux de traces suivants sont pris en charge:<br/>
<ul><li><span class="id">off</span> - Pas de journal de traces (non recommandé)</li><li><span class="id">error</span> - Journaliser uniquement les erreurs</li><li><span class="id">warn</span> - Journaliser les avertissements et les erreurs</li><li><span class="id">info</span> - Journaliser les messages d'information, les avertissements et les erreurs</li><li><span class="id">detail</span> - Journaliser les détails, les messages d'information, les avertissements et les erreurs</li><li><span class="id">debug</span> - Journaliser les message de Débogage, les détails, les messages d'information, les avertissements et les erreurs</li><li><span class="id">trace</span> - Journaliser les traces (un débogage très verbeux), les message de Débogage, les détails, les messages d'information, les avertissements et les erreurs</li></ul></div><pre class="code-block">default: warn
example: log-level-console=error</pre></div></div><div class="section2"><a id="section-log/option-log-level-file"></a><div class="section2-header"><div class="section2-number">5.2</div><div class="section2-title">Niveau du journal fichier (<span class="id">--log-level-file</span>)</div></div><div class="section-body"><div class="section-body-text">Niveau d'enregistrement des traces lors de l'enregistrement sur fichier.</div><div class="section-body-text">Les niveaux de traces suivants sont pris en charge:<br/>
<ul><li><span class="id">off</span> - Pas de journal de traces (non recommandé)</li><li><span class="id">error</span> - Journaliser uniquement les erreurs</li><li><span class="id">warn</span> - Journaliser les avertissements et les erreurs</li><li><span class="id">info</span> - Journaliser les messages d'information, les avertissements et les erreurs</li><li><span class="id">detail</span> - Journaliser les détails, les messages d'information, les avertissements et les erreurs</li><li><span class="id">debug</span> - Journaliser les message de Débogage, les détails, les messages d'information, les avertissements et les erreurs</li><li><span class="id">trace</span> - Journaliser les traces (un débogage très verbeux), les message de Débogage, les détails, les messages d'information, les avertissements et les erreurs</li></ul></div><pre class="code-block">default: info
example: log-level-file=debug</pre></div></div><div class="section2"><a id="section-log/option-log-level-stderr"></a><div class="section2-header"><div class="section2-number">5.3</div><div class="section2-title">Niveau du journal pour stderr (<span class="id">--log-level-stderr</span>)</div></div><div class="section-body"><div class="section-body-text">Niveau de traces sur la sortie console stderr.</div><div class="section-body-text">Spécifie les niveaux de traces qui sortiront en <span class="id">stderr</span> plutôt que <span class="id">stdout</span> (spécifié par <span class="br-option">log-level-console</span>). L'horodatage et le processus ne seront pas émis sur <span class="id">stderr</span>.<br/>
<br/>
Les niveaux de traces suivants sont pris en charge:<br/>
<ul><li><span class="id">off</span> - Pas de journal de traces (non recommandé)</li><li><span class="id">error</span> - Journaliser uniquement les erreurs</li><li><span class="id">warn</span> - Journaliser les avertissements et les erreurs</li><li><span class="id">info</span> - Journaliser les messages d'information, les avertissements et les erreurs</li><li><span class="id">detail</span> - Journaliser les détails, les messages d'information, les avertissements et les erreurs</li><li><span class="id">debug</span> - Journaliser les message de Débogage, les détails, les messages d'information, les avertissements et les erreurs</li><li><span class="id">trace</span> - Journaliser les traces (un débogage très verbeux), les message de Débogage, les détails, les messages d'information, les avertissements et les erreurs</li></ul></div><pre class="code-block">default: warn
example: log-level-stderr=error</pre></div></div><div class="section2"><a id="section-log/option-log-path"></a><div class="section2-header"><div class="section2-number">5.4</div><div class="section2-title">Emplacement du journal (<span class="id">--log-path</span>)</div></div><div class="section-body"><div class="section-body-text">Emplacement où les fichiers journaux de traces sont stockés.</div><div class="section-body-text">Le chemin d'accès au journal fournit un emplacement pour <span class="backrest">pgBackRest</span> pour stocker les fichiers journaux. Notez que si <span class="br-setting">log-level-file=off</span> alors aucun chemin pour l'emplacement des journaux de traces n'est nécessaire.</div><pre class="code-block">default: /var/log/pgbackrest
example: log-path=/backup/db/log</pre></div></div><div class="section2"><a id="section-log/option-log-subprocess"></a><div class="section2-header"><div class="section2-number">5.5</div><div class="section2-title">Journalisation des sous-processus (<span class="id">--log-subprocess</span>)</div></div><div class="section-body"><div class="section-body-text">Activer la journalisation des traces dans les sous-processus.</div><div class="section-body-text">Activez la journalisation des traces dans les fichiers pour tous les sous-processus créés par ce processus en utilisant le niveau de journalisation spécifié par <span class="br-option">log-level-file</span>.</div><pre class="code-block">default: n
example: log-subprocess=y</pre></div></div><div class="section2"><a id="section-log/option-log-timestamp"></a><div class="section2-header"><div class="section2-number">5.6</div><div class="section2-title">Horodatage du journal (<span class="id">--log-timestamp</span>)</div></div><div class="section-body"><div class="section-body-text">Activer l'horodatage dans les traces.</div><div class="section-body-text">Active l'horodatage dans la console et l'enregistrement des fichiers. Cette option est désactivée dans des situations particulières telles que la génération de documentation.</div><pre class="code-block">default: y
example: log-timestamp=n</pre></div></div></div></div><div class="section1"><a id="section-repository"></a><div class="section1-header"><div class="section1-number">6</div><div class="section1-title">Dépot (Repository) Options (<span class="id">repository</span>)</div></div><div class="section-intro">La section <span class="br-setting">repository</span> (dépot) définit les options utilisées pour configurer le dépôt de sauvegarde.<br/>
<br/>
<b>Indexation</b> : Toutes les options <span class="br-setting">repo-</span> sont indexées pour permettre la configuration de plusieurs dépôts, bien qu'un seul dépôt soit actuellement pris en charge. Par exemple, le dépôt est configuré avec les options <span class="br-setting">repo1-path</span>, <span class="br-setting">repo1-host</span>, etc.<br/>
<br/>
Les options <span class="br-setting">repo-retention-*</span> définissent la durée de la rétention des sauvegardes. L'expiration ne se produit que lorsque le nombre de sauvegardes complètes dépasse la rétention autorisée. Autrement dit, si l'option de conservation-full est réglée sur 2, il doit y avoir 3 sauvegardes complètes avant que la plus ancienne ne soit périmée. Veillez à toujours disposer d'un espace suffisant pour la conservation + 1 sauvegarde.</div><div class="section-body"><div class="section2"><a id="section-repository/option-repo-cipher-pass"></a><div class="section2-header"><div class="section2-number">6.1</div><div class="section2-title">Phrase de chiffrement du dépôt (<span class="id">--repo-cipher-pass</span>)</div></div><div class="section-body"><div class="section-body-text">Phrase de chiffrement du dépôt.</div><div class="section-body-text">Mot de passe utilisée pour chiffrer/déchiffrer les fichiers du dépôt.</div><pre class="code-block">example: repo1-cipher-pass=zWaf6XtpjIVZC5444yXB+cgFDFl7MxGlgkZSaoPvTGirhPygu4jOKOXf9LO4vjfO</pre></div></div><div class="section2"><a id="section-repository/option-repo-cipher-type"></a><div class="section2-header"><div class="section2-number">6.2</div><div class="section2-title">Type de chiffrement du dépôt (<span class="id">--repo-cipher-type</span>)</div></div><div class="section-body"><div class="section-body-text">Chiffrement (cipher) utilisé pour chiffrer le dépôt.</div><div class="section-body-text">Les types de chiffrement suivants sont pris en charge:<br/>
<ul><li><span class="id">none</span> - Le dépôt n'est pas chiffré.</li><li><span class="id">aes-256-cbc</span> - Advanced Encryption Standard avec une clef de 256 bit</li></ul>À noter que le chiffrement est toujours effectué côté client même si le type de stockage (par exemple S3) supporte le chiffrement.</div><pre class="code-block">default: none
example: repo1-cipher-type=aes-256-cbc</pre></div></div><div class="section2"><a id="section-repository/option-repo-hardlink"></a><div class="section2-header"><div class="section2-number">6.3</div><div class="section2-title">Liens physiques Dépot (<span class="id">--repo-hardlink</span>)</div></div><div class="section-body"><div class="section-body-text">Liens physiques (hardlink) des fichiers entre les sauvegardes dans le dépôt.</div><div class="section-body-text">Activation la liaison physique des fichiers dans les sauvegardes différentielles et incrémentales avec leurs sauvegardes complètes. Cela donne l'impression que chaque sauvegarde est une sauvegarde complète au niveau du système de fichiers. Attention, cependant, car la modification de fichiers liés peut affecter toutes les sauvegardes de ce jeu.</div><pre class="code-block">default: n
example: repo1-hardlink=y</pre><div class="section-body-text">Nom obsolète: hardlink</div></div></div><div class="section2"><a id="section-repository/option-repo-host"></a><div class="section2-header"><div class="section2-number">6.4</div><div class="section2-title">Hôte du dépot (<span class="id">--repo-host</span>)</div></div><div class="section-body"><div class="section-body-text">Hôte de dépôt dans le cas d'un fonctionnement à distance via SSH.</div><div class="section-body-text">Assurez-vous que l'authentification SSH soit correctement approuvé entre l'hôte <span class="postgres">PostgreSQL</span> et l'hôte du référentiel.<br/>
<br/>
Ce paramètre n'est pas nécessaire pour la sauvegarde et l'archivage sur un système de fichiers monté localement.</div><pre class="code-block">example: repo1-host=repo1.domain.com</pre><div class="section-body-text">Nom obsolète: backup-host</div></div></div><div class="section2"><a id="section-repository/option-repo-host-cmd"></a><div class="section2-header"><div class="section2-number">6.5</div><div class="section2-title">Chemin des binaires (<span class="id">--repo-host-cmd</span>)</div></div><div class="section-body"><div class="section-body-text">Chemin des binaires <span class="backrest">pgBackRest</span> sur l'hôte du dépôt.</div><div class="section-body-text">Nécessaire uniquement si le chemin d'accès à <span class="file">pgbackrest</span> est différent entre les hôtes locaux et l'hote du dépôt. S'il n'est pas défini, le chemin des binaires sur l'hôte du dépôt sera le même que le chemin des binaires locaux.</div><pre class="code-block">example: repo1-host-cmd=/usr/lib/backrest/bin/pgbackrest</pre><div class="section-body-text">Nom obsolète: backup-cmd</div></div></div><div class="section2"><a id="section-repository/option-repo-host-config"></a><div class="section2-header"><div class="section2-number">6.6</div><div class="section2-title">Emplacement du fichier de configuration (<span class="id">--repo-host-config</span>)</div></div><div class="section-body"><div class="section-body-text">Emplacement du fichier de configuration <span class="backrest">pgBackRest</span> sur l'hôte du dépôt.</div><div class="section-body-text">Définit l'emplacement du fichier de configuration sur l'hôte du dépôt. Ceci n'est nécessaire que si le fichier de configuration de l'hôte du dépôt se trouve dans un emplacement différent de celui du fichier de configuration local.</div><pre class="code-block">default: /etc/pgbackrest/pgbackrest.conf
example: repo1-host-config=/conf/pgbackrest/pgbackrest.conf</pre><div class="section-body-text">Nom obsolète: backup-config</div></div></div><div class="section2"><a id="section-repository/option-repo-host-config-include-path"></a><div class="section2-header"><div class="section2-number">6.7</div><div class="section2-title">Chemin d'inclusion de la configuration (<span class="id">--repo-host-config-include-path</span>)</div></div><div class="section-body"><div class="section-body-text">Chemin d'inclusion <span class="backrest">pgBackRest</span> de la configuration de l'hôte du dépôt.</div><div class="section-body-text">Définit l'emplacement du chemin d'inclusion de la configuration sur l'hôte du dépôt. Ceci n'est nécessaire que si le chemin d'inclusion de la configuration de l'hôte du dépôt se trouve à un endroit différent du chemin d'inclusion de la configuration locale.</div><pre class="code-block">default: /etc/pgbackrest/conf.d
example: repo1-host-config-include-path=/conf/pgbackrest/conf.d</pre></div></div><div class="section2"><a id="section-repository/option-repo-host-config-path"></a><div class="section2-header"><div class="section2-number">6.8</div><div class="section2-title">Chemin de configuration (<span class="id">--repo-host-config-path</span>)</div></div><div class="section-body"><div class="section-body-text">Chemin de configuration <span class="backrest">pgBackRest</span> de l'hôte du dépôt.</div><div class="section-body-text">Définit l'emplacement du chemin de configuration sur l'hôte du dépôt. Ceci n'est nécessaire que si le chemin de configuration de l'hôte du référentiel se trouve à un endroit différent du chemin de configuration local.</div><pre class="code-block">default: /etc/pgbackrest
example: repo1-host-config-path=/conf/pgbackrest</pre></div></div><div class="section2"><a id="section-repository/option-repo-host-port"></a><div class="section2-header"><div class="section2-number">6.9</div><div class="section2-title">Port de l'hôte du dépôt (<span class="id">--repo-host-port</span>)</div></div><div class="section-body"><div class="section-body-text">Port de l'hôte du dépôt lorsque <span class="br-setting">repo-host</span> est défini.</div><div class="section-body-text">Utilisez cette option pour spécifier un port non par défaut pour le protocole d'accès à l'hôte du dépôt. Actuellement, seul SSH est pris en charge</div><pre class="code-block">allowed: 0-65535
example: repo1-host-port=25</pre><div class="section-body-text">Nom obsolète: backup-ssh-port</div></div></div><div class="section2"><a id="section-repository/option-repo-host-user"></a><div class="section2-header"><div class="section2-number">6.10</div><div class="section2-title">Utilisateur de l'hôte du dépôt (<span class="id">--repo-host-user</span>)</div></div><div class="section-body"><div class="section-body-text">Utilisateur de l'hôte du dépôt lorsque <span class="br-setting">repo-host</span> est défini.</div><div class="section-body-text">Définit l'utilisateur qui sera utilisé pour les opérations sur l'hôte du dépôt. De préférence, il ne s'agit pas de l'utilisateur <span class="id">postgres</span> mais plutôt d'un autre utilisateur comme <span class="id">pgbackrest</span>. Si <span class="postgres">PostgreSQL</span> fonctionne sur l'hôte du dépôt, l'utilisateur <span class="id">postgres</span> peut être placé dans le groupe <span class="id">pgbackrest</span> afin qu'il ait les autorisations de lecture sur le dépôt sans pouvoir en endommager le contenu accidentellement.</div><pre class="code-block">default: pgbackrest
example: repo1-host-user=repo-user</pre><div class="section-body-text">Nom obsolète: backup-user</div></div></div><div class="section2"><a id="section-repository/option-repo-path"></a><div class="section2-header"><div class="section2-number">6.11</div><div class="section2-title">Chemin d'accès du Dépots (<span class="id">--repo-path</span>)</div></div><div class="section-body"><div class="section-body-text">Chemin d'accès où sont stockées les sauvegardes et les archives.</div><div class="section-body-text">Le dépôt est l'endroit où <span class="backrest">pgBackRest</span> stocke les sauvegardes et archive les segments des journaux de transaction (WAL).<br/>
<br/>
Il peut être difficile d'estimer à l'avance l'espace dont vous aurez besoin. La meilleure chose à faire est de prendre quelques sauvegardes puis d'enregistrer la taille des différents types de sauvegardes (full/incr/diff) et de mesurer la quantité de WAL générée par jour. Cela vous donnera une idée générale de l'espace dont vous aurez besoin, même si, bien sûr, les besoins changeront probablement au fil du temps, à fur et à mesure de l'évolution de votre base de données.</div><pre class="code-block">default: /var/lib/pgbackrest
example: repo1-path=/backup/db/backrest</pre></div></div><div class="section2"><a id="section-repository/option-repo-retention-archive"></a><div class="section2-header"><div class="section2-number">6.12</div><div class="section2-title">Rétention d'Archive (<span class="id">--repo-retention-archive</span>)</div></div><div class="section-body"><div class="section-body-text">Nombre de sauvegardes correspondant à la valeur de WAL continue à conserver.</div><div class="section-body-text"><div class="admonition"><div class="note">NOTE:</div><div class="note-text">Les segments WAL nécessaires pour rendre une sauvegarde cohérente sont toujours conservés jusqu'à l'expiration de la sauvegarde, quelle que soit la configuration de cette option.</div></div> Si cette configuration n'est pas définie et que <span class="br-setting">repo-retention-full-type</span> est positionné sur <span class="br-setting">count</span> (valeur par défaut), alors l'expiration de l'archive sera par défaut à la valeur de <span class="br-setting">repo-retention-full</span> si <span class="br-setting">repo-retention-archive-type</span> est définit à <span class="br-setting">full</span> (ou à <span class="br-setting">repo-retention-diff</span> si <span class="br-setting">repo-retention-archive-type</span> est définit à <span class="br-setting">diff</span> ). Cela permet de garantir que le WAL n'expirera que pour les sauvegardes ayant déjà expirées. Si <span class="br-setting">repo-retention-full-type</span> est positionné sur <span class="br-setting">time</span>, avec cette valeur, par défaut, les archives qui sont antérieures à la plus ancienne sauvegarde complète conservée et satisfaisant au paramètre <span class="br-setting">repo-retention-full</span> seront supprimés.<br/>
<br/>
Cette option doit être définie si <span class="br-setting">repo-retention-archive-type</span> est positionné sur <span class="br-setting">incr</span>. Si l'espace disque est insuffisant, ce paramètre, associé à <span class="br-setting">repo-retention-archive-type</span>, peut être utilisé pour faire expirer de manière agressive les segments WAL. Toutefois, cela annule la possibilité d'effectuer un PITR à partir des sauvegardes avec les WAL expirés et donc <b>n'est pas</b> recommandé.</div><pre class="code-block">allowed: 1-9999999
example: repo1-retention-archive=2</pre><div class="section-body-text">Nom obsolète: retention-archive</div></div></div><div class="section2"><a id="section-repository/option-repo-retention-archive-type"></a><div class="section2-header"><div class="section2-number">6.13</div><div class="section2-title">Type Rétention Archive (<span class="id">--repo-retention-archive-type</span>)</div></div><div class="section-body"><div class="section-body-text">Type de sauvegarde pour la conservation des journaux de transaction (WAL).</div><div class="section-body-text">Lorsque <span class="br-setting">repo-retention-archive-type</span> est positionné sur <span class="br-setting">full</span> <span class="backrest">pgBackRest</span> conservera les journaux de trasnaction (WAL) pour le nombre de sauvegardes complètes défini par <span class="br-setting">repo-retention-archive</span>. S'il est positionné sur <span class="br-setting">diff</span> (différentiel) <span class="backrest">pgBackRest</span> conservera les journaux de trasnaction (WAL) pour le nombre de sauvegardes complètes et différentielles défini par <span class="br-setting">repo-retention-archive</span>, ce qui signifie que si la dernière sauvegarde effectuée était une sauvegarde complète, elle sera comptée comme un différentiel pour les besoins de la retention du dépôt. S'il est positionné sur <span class="br-setting">incr</span> (incrémental) <span class="backrest">pgBackRest</span> conservera les journaux de trasnaction (WAL) pour le nombre de sauvegardes complètes, différentielles et incrémentielles défini par <span class="br-setting">repo-retention-archive</span>. Il est recommandé de ne pas modifier ce paramètre par rapport à la valeur par défaut : expiration que lorsque les sauvegardes complètes auront expiré.</div><pre class="code-block">default: full
example: repo1-retention-archive-type=diff</pre><div class="section-body-text">Nom obsolète: retention-archive-type</div></div></div><div class="section2"><a id="section-repository/option-repo-retention-diff"></a><div class="section2-header"><div class="section2-number">6.14</div><div class="section2-title">Rétention Différentielle (<span class="id">--repo-retention-diff</span>)</div></div><div class="section-body"><div class="section-body-text">Nombre de sauvegardes différentielles à conserver.</div><div class="section-body-text">Lorsqu'une sauvegarde différentielle expire, toutes les sauvegardes incrémentales associées à la sauvegarde différentielle expirent également. Lorsqu'elles ne sont pas définies, toutes les sauvegardes différentielles seront conservées jusqu'à ce que les sauvegardes complètes dont elles dépendent expirent.</div><pre class="code-block">allowed: 1-9999999
example: repo1-retention-diff=3</pre><div class="section-body-text">Nom obsolète: retention-diff</div></div></div><div class="section2"><a id="section-repository/option-repo-retention-full"></a><div class="section2-header"><div class="section2-number">6.15</div><div class="section2-title">Rétention Complète (<span class="id">--repo-retention-full</span>)</div></div><div class="section-body"><div class="section-body-text">Nombre ou temps de sauvegardes complètes à conserver.</div><div class="section-body-text">Lorsqu'une sauvegarde complète expire, toutes les sauvegardes différentielles et incrémentielles associées à la sauvegarde complète expirent également. Lorsque l'option n'est pas définie, un avertissement sera émis. Si une conservation indéfinie est souhaitée, il faut alors définir l'option à la valeur maximale.</div><pre class="code-block">allowed: 1-9999999
example: repo1-retention-full=2</pre><div class="section-body-text">Nom obsolète: retention-full</div></div></div><div class="section2"><a id="section-repository/option-repo-retention-full-type"></a><div class="section2-header"><div class="section2-number">6.16</div><div class="section2-title">Type de rétention Complète (<span class="id">--repo-retention-full-type</span>)</div></div><div class="section-body"><div class="section-body-text">Type de conservation pour les sauvegardes complètes.</div><div class="section-body-text">Détermine si le paramètre <span class="br-setting">repo-retention-full</span> représente une période de temps (jours) ou le nombre de sauvegardes complètes à conserver. Si le paramètre est réglé sur <span class="br-setting">time</span> les sauvegardes complètes plus anciennes que le paramètre <span class="br-setting">repo-retention-full</span> seront supprimées du dépôt si au moins une sauvegarde est égale ou supérieure au paramètre <span class="br-setting">repo-retention-full</span>. Par exemple, si <span class="br-setting">repo-retention-full</span> est de 30 (jours) et qu'il y a 2 sauvegardes complètes : une de 25 jours et une de 35 jours, aucune sauvegarde complète n'expirera puisque l'expiration de la sauvegarde de 35 jours ne laisserait que la sauvegarde de 25 jours; ce qui violerait la politique de conservation de 30 jours : à savoir, avoir au moins une sauvegarde de 30 jours avant qu'une plus ancienne puisse expirer. Les journaux de transactions archivés (WAL) plus anciennes que la sauvegarde complète la plus ancienne restante seront automatiquement expirées, à moins que les paramètres <span class="br-setting">repo-retention-archive-type</span> et <span class="br-setting">repo-retention-archive</span> ne soient explicitement définis.</div><pre class="code-block">default: count
example: repo1-retention-full-type=30</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-bucket"></a><div class="section2-header"><div class="section2-number">6.17</div><div class="section2-title">S3 Bucket (<span class="id">--repo-s3-bucket</span>)</div></div><div class="section-body"><div class="section-body-text">S3 dépôt bucket.</div><div class="section-body-text">Bucket S3 utilisé pour stocker le dépôt.<br/>
<br/>
Les dépots <span class="backrest">pgBackRest</span> peuvent être stockés à la racine du bucket en définissant <span class="br-option">repo-path=/</span> mais il est généralement préférable de spécifier un préfixe, comme par exemple <span class="path">/repo</span>, afin que les logs et autres contenus générés par AWS puissent également être stockés dans le bucket.</div><pre class="code-block">example: repo1-s3-bucket=pg-backup</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-ca-file"></a><div class="section2-header"><div class="section2-number">6.18</div><div class="section2-title">Fichier SSL CA S3 (<span class="id">--repo-s3-ca-file</span>)</div></div><div class="section-body"><div class="section-body-text">Ficher SSL CA S3.</div><div class="section-body-text">Utiliser un fichier CA autre que celui défini par défaut dans le système.</div><pre class="code-block">example: repo1-s3-ca-file=/etc/pki/tls/certs/ca-bundle.crt</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-ca-path"></a><div class="section2-header"><div class="section2-number">6.19</div><div class="section2-title">Chemin SSL CA (<span class="id">--repo-s3-ca-path</span>)</div></div><div class="section-body"><div class="section-body-text">Chemin S3 SSL CA.</div><div class="section-body-text">Utiliser un chemin pour le CA autre que celui défini par défaut dans le système.</div><pre class="code-block">example: repo1-s3-ca-path=/etc/pki/tls/certs</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-endpoint"></a><div class="section2-header"><div class="section2-number">6.20</div><div class="section2-title">Point de terminaison S3 (<span class="id">--repo-s3-endpoint</span>)</div></div><div class="section-body"><div class="section-body-text">Dépot S3 Point de terminaison (endpoint).</div><div class="section-body-text">Le point de terminaison d'AWS doit être valable pour la région sélectionnée.</div><pre class="code-block">example: repo1-s3-endpoint=s3.amazonaws.com</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-host"></a><div class="section2-header"><div class="section2-number">6.21</div><div class="section2-title">Hôte S3 (<span class="id">--repo-s3-host</span>)</div></div><div class="section-body"><div class="section-body-text">Hôte du dépot S3.</div><div class="section-body-text">Conntecter sur un hôte différent du point de terminaison (endpoint). Il est généralement utilisé à des fins de test.</div><pre class="code-block">example: repo1-s3-host=127.0.0.1</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-key"></a><div class="section2-header"><div class="section2-number">6.22</div><div class="section2-title">Clé d'accès S3 (<span class="id">--repo-s3-key</span>)</div></div><div class="section-body"><div class="section-body-text">Clé d'accès au dépôt S3.</div><div class="section-body-text">Clé AWS utilisée pour accéder au bucket.</div><pre class="code-block">example: repo1-s3-key=AKIAIOSFODNN7EXAMPLE</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-key-secret"></a><div class="section2-header"><div class="section2-number">6.23</div><div class="section2-title">Clé d'accès secrète S3 (<span class="id">--repo-s3-key-secret</span>)</div></div><div class="section-body"><div class="section-body-text">Clé d'accès secrète au dépôt S3.</div><div class="section-body-text">Clé secrète AWS utilisée pour accéder au bucket.</div><pre class="code-block">example: repo1-s3-key-secret=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-port"></a><div class="section2-header"><div class="section2-number">6.24</div><div class="section2-title">Port S3 (<span class="id">--repo-s3-port</span>)</div></div><div class="section-body"><div class="section-body-text">Port de connection au dépot S3.</div><div class="section-body-text">Port à utiliser lors de la connexion au point de terminaison (ou à l'hôte si spécifié).</div><pre class="code-block">default: 443
allowed: 1-65535
example: repo1-s3-port=9000</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-region"></a><div class="section2-header"><div class="section2-number">6.25</div><div class="section2-title">Région S3 (<span class="id">--repo-s3-region</span>)</div></div><div class="section-body"><div class="section-body-text">Région du dépôt S3.</div><div class="section-body-text">La région d'AWS où le bucket a été créé.</div><pre class="code-block">example: repo1-s3-region=us-east-1</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-token"></a><div class="section2-header"><div class="section2-number">6.26</div><div class="section2-title">Jeton de sécurité pour le dépôt S3 (<span class="id">--repo-s3-token</span>)</div></div><div class="section-body"><div class="section-body-text">Jeton de sécurité pour le dépôt S3.</div><div class="section-body-text">Jeton de sécurité AWS utilisé avec des identifiants temporaires.</div><pre class="code-block">example: repo1-s3-token=AQoDYXdzEPT//////////wEXAMPLEtc764bNrC9SAPBSM22 ...</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-uri-style"></a><div class="section2-header"><div class="section2-number">6.27</div><div class="section2-title">S3 Formats d'URI (<span class="id">--repo-s3-uri-style</span>)</div></div><div class="section-body"><div class="section-body-text">S3 URI formats.</div><div class="section-body-text">Les formats URI suivants sont pris en charge:<br/>
<ul><li><span class="id">host</span> - Connexion à l'hôte <span class="id">bucket.endpoint</span>.</li><li><span class="id">path</span> - Connexion à l'hôte <span class="id">endpoint</span> et ajout du bucket aux URIs.</li></ul></div><pre class="code-block">default: host
example: repo1-s3-uri-style=path</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-verify-tls"></a><div class="section2-header"><div class="section2-number">6.28</div><div class="section2-title">S3 Vérifiction TLS (<span class="id">--repo-s3-verify-tls</span>)</div></div><div class="section-body"><div class="section-body-text">Vérifier le certificat du serveur S3.</div><div class="section-body-text">Désactive la vérification du certificat du serveur S3. Cette fonction ne doit être utilisée que dans le cadre de tests ou dans le cas d'une utilisation avec un certificat a été auto-signé.</div><pre class="code-block">default: y
example: repo1-s3-verify-tls=n</pre><div class="section-body-text">Nom obsolète: repo-s3-verify-ssl</div></div></div><div class="section2"><a id="section-repository/option-repo-type"></a><div class="section2-header"><div class="section2-number">6.29</div><div class="section2-title">Type de dépot (<span class="id">--repo-type</span>)</div></div><div class="section-body"><div class="section-body-text">Type de stockage utilisé pour le dépôt.</div><div class="section-body-text">Les types de stockage suivants sont pris en charge :<br/>
<ul><li><span class="id">cifs</span> - Comme <span class="id">posix</span>, mais désactive les liens et les fsyncs sur les répertoires</li><li><span class="id">posix</span> - Systèmes de fichiers conformes à Posix</li><li><span class="id">s3</span> - Service de stockage d'objet (AWS Simple Storage Service)</li></ul></div><pre class="code-block">default: posix
example: repo1-type=cifs</pre></div></div></div></div><div class="section1"><a id="section-restore"></a><div class="section1-header"><div class="section1-number">7</div><div class="section1-title">Restore Options (<span class="id">restore</span>)</div></div><div class="section-intro">La section <span class="br-setting">restore</span> définit les paramètres utilisés lors de la restauration des sauvegardes.</div><div class="section-body"><div class="section2"><a id="section-restore/option-db-include"></a><div class="section2-header"><div class="section2-number">7.1</div><div class="section2-title">Inclure la base de données (<span class="id">--db-include</span>)</div></div><div class="section-body"><div class="section-body-text">Restaurer uniquement des bases de données spécifiques.</div><div class="section-body-text">Cette fonctionnalité permet de ne restaurer que certaines bases de données. Les bases de données qui ne sont pas spécifiquement sélectionnées seront restaurées sous la forme de fichiers épars et mis à zéro afin d'économiser de l'espace, tout en permettant à <span class="postgres">PostgreSQL</span> d'effectuer la restauration. Après la récupération, les bases de données qui n'ont pas été incluses ne seront pas accessibles mais peuvent être supprimées avec la commande <span class="id">drop database</span>. <div class="admonition"><div class="note">NOTE:</div><div class="note-text">Les bases de données intégrées (<span class="id">template0</span>, <span class="id">template1</span>, et <span class="id">postgres</span>) sont toujours restaurées.</div></div>L'option <span class="br-setting">--db-include</span> peut être passée plusieurs fois pour spécifier plus d'une base de données à inclure.</div><pre class="code-block">example: db-include=db_main</pre></div></div><div class="section2"><a id="section-restore/option-link-all"></a><div class="section2-header"><div class="section2-number">7.2</div><div class="section2-title">Tous Liens synboliques (<span class="id">--link-all</span>)</div></div><div class="section-body"><div class="section-body-text">Restaurer tous les liens symboliques</div><div class="section-body-text">Par défaut, les liens symboliques qu'ils soient répertoires ou fichiers sont restaurés comme des répertoires et fichiers standards dans $PGDATA. En effet, il peut être dangereux de restaurer des liens symboliques vers leur destination d'origine sur un système autre que celui où la sauvegarde d'origine a été effectuée. Cette option restaure tous les liens symboliques tels qu'ils étaient sur le système d'origine où la sauvegarde a été effectuée.</div><pre class="code-block">default: n
example: link-all=y</pre></div></div><div class="section2"><a id="section-restore/option-link-map"></a><div class="section2-header"><div class="section2-number">7.3</div><div class="section2-title">Mappage liens symboliques (<span class="id">--link-map</span>)</div></div><div class="section-body"><div class="section-body-text">Modification de la destination d'un lien symbolique.</div><div class="section-body-text">Permet de modifier la destination du fichier ou du répertoire d'un lien symbolique lors de la restauration. Ceci est utile lors de la restauration sur un sytèmes avec une configuration du stockage différente de celle du système d'origine (là où la sauvegarde a été réalisée).</div><pre class="code-block">example: link-map=pg_xlog=/data/xlog</pre></div></div><div class="section2"><a id="section-restore/option-recovery-option"></a><div class="section2-header"><div class="section2-number">7.4</div><div class="section2-title">Option Récuperation (<span class="id">--recovery-option</span>)</div></div><div class="section-body"><div class="section-body-text">Définissez une option dans <span class="file">recovery.conf</span>.</div><div class="section-body-text">Consultez http://www.postgresql.org/docs/X.X/static/recovery-config.html pour plus de détails sur les options de recovery.conf (remplacez X.X par votre <span class="postgres">PostgreSQL</span> version). Cette option peut être utilisée plusieurs fois.<div class="admonition"><div class="note">NOTE:</div><div class="note-text">L'option <span class="br-setting">restore_command</span> sera générée automatiquement mais peut être écrasée avec cette option. Faites attention à bien spécifier votre propre <span class="br-setting">restore_command</span> car <span class="backrest">pgBackRest</span> est conçu pour gérer cela pour vous. Les options Target Recovery (recovery_target_name, recovery_target_time, etc.) sont générées automatiquement par <span class="backrest">pgBackRest</span> et ne doivent pas être définies avec cette option.</div></div>Dans la mesure où <span class="backrest">pgBackRest</span> ne démarre pas <span class="postgres">PostgreSQL</span> après avoir écrit le fichier <span class="file">recovery.conf</span>, il est toujours possible de modifier/contrôler <span class="file">recovery.conf</span> avant de redémarrer manuellement.</div><pre class="code-block">example: recovery-option=primary_conninfo=db.mydomain.com</pre></div></div><div class="section2"><a id="section-restore/option-tablespace-map"></a><div class="section2-header"><div class="section2-number">7.5</div><div class="section2-title">Mappage Tablespace (<span class="id">--tablespace-map</span>)</div></div><div class="section-body"><div class="section-body-text">Restaurer un tablespace dans un répertoire spécifique.</div><div class="section-body-text">Déplace un tablespace vers un nouvel emplacement pendant la restauration. Cela est utile lorsque les emplacements des tablespaces ne sont pas les mêmes sur un secondaire en réplication, ou lorsqu'un système a des points de montage différents après une mis à niveau.<br/>
<br/>
Depuis la version <span class="postgres">PostgreSQL</span> 9.2, les emplacements des tablespaces ne sont pas stockés dans pg_tablespace, donc le déplacement des tablespaces peut se faire en toute tranquillité. Cependant, le déplacement d'un tablespace vers le <span class="br-setting">data_directory</span> n'est pas recommandé et peut causer des problèmes. Pour plus d'informations sur le déplacement des tablespaces, http://www.databasesoup.com/2013/11/moving-tablespaces.html est une bonne ressource (en anglais).</div><pre class="code-block">example: tablespace-map=ts_01=/db/ts_01</pre></div></div><div class="section2"><a id="section-restore/option-tablespace-map-all"></a><div class="section2-header"><div class="section2-number">7.6</div><div class="section2-title">Remappage Tous Tablespaces (<span class="id">--tablespace-map-all</span>)</div></div><div class="section-body"><div class="section-body-text">Restaurez tous les tablespaces dans le répertoire spécifié.</div><div class="section-body-text">Par défaut, les tablespaces sont restaurés à leur emplacement d'origine et, bien que ce comportement puisse être modifié avec l'option <span class="br-setting">tablespace-map</span>, il est parfois souhaitable de remapper tous les tablespaces dans un nouveau répertoire en une seule fois. Ceci est particulièrement utile pour les systèmes de développement ou de mise en place qui peuvent ne pas avoir la même disposition de stockage que le système d'origine où la sauvegarde a été réalisée.<br/>
<br/>
Le chemin spécifié sera le chemin parent utilisé pour créer tous les tablespaces de la sauvegarde lors de la restauration.</div><pre class="code-block">example: tablespace-map-all=/data/tablespace</pre></div></div></div></div><div class="section1"><a id="section-stanza"></a><div class="section1-header"><div class="section1-number">8</div><div class="section1-title">Stanza Options (<span class="id">stanza</span>)</div></div><div class="section-intro">Un stanza définit la configuration de sauvegarde d'une instance de base de données <span class="postgres">PostgreSQL</span> déterminé. La section stanza doit définir le chemin de l'instance de base de données et l'hôte/utilisateur si l'instance de base de données est distante. De plus, toute section de configuration globale peut être écrasée pour définir des paramètres spécifiques au stanza.<br/>
<br/>
<b>Indexation</b> : Toutes les options <span class="br-setting">pg-</span> sont indexées pour permettre la configuration de plusieurs hôtes <span class="postgres">PostgreSQL</span> . Par exemple, un seul primaire est configurée avec les options <span class="br-setting">pg1-path</span>, <span class="br-setting">pg1-port</span>, etc. Si un secondaire (standby) est configuré, alors les options <span class="br-setting">pg-</span> sur l'hôte du dépôt sont indexées comme <span class="br-setting">pg2-</span> (par exemple pg2-host, pg2-path, etc).</div><div class="section-body"><div class="section2"><a id="section-stanza/option-pg-host"></a><div class="section2-header"><div class="section2-number">8.1</div><div class="section2-title">Hôte PostgreSQL (<span class="id">--pg-host</span>)</div></div><div class="section-body"><div class="section-body-text">Hôte <span class="postgres">PostgreSQL</span> pour les opérations à distance via SSH.</div><div class="section-body-text">Utilisé pour les sauvegardes lorsque l'hôte <span class="postgres">PostgreSQL</span> est différent de l'hôte du dépôt.</div><pre class="code-block">example: pg1-host=db.domain.com</pre><div class="section-body-text">Nom obsolète: db-host</div></div></div><div class="section2"><a id="section-stanza/option-pg-host-cmd"></a><div class="section2-header"><div class="section2-number">8.2</div><div class="section2-title">Hôte PostgreSQL Commande (<span class="id">--pg-host-cmd</span>)</div></div><div class="section-body"><div class="section-body-text">Emplacement des exécutable <span class="backrest">pgBackRest</span> sur l'hôte <span class="postgres">PostgreSQL</span>.</div><div class="section-body-text">Uniquement requis si le chemin vers <span class="file">pgbackrest</span> est différent sur le serveur local et <span class="postgres">PostgreSQL</span>. S'il n'est pas défini, le chemin de l'<span class="file">pgbackrest</span> de l'hôte de la base de données sera le même que le chemin de l'<span class="file">pgbackrest</span> local.</div><pre class="code-block">example: pg1-host-cmd=/usr/lib/backrest/bin/pgbackrest</pre><div class="section-body-text">Nom obsolète: db-cmd</div></div></div><div class="section2"><a id="section-stanza/option-pg-host-config"></a><div class="section2-header"><div class="section2-number">8.3</div><div class="section2-title">Hôte PostgreSQL Configuration (<span class="id">--pg-host-config</span>)</div></div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> database host configuration file.</div><div class="section-body-text">Définit l'emplacement du fichier de configuration sur l'hôte <span class="postgres">PostgreSQL</span>. Ceci n'est requis que si le fichier de configuration de l'hôte <span class="postgres">PostgreSQL</span> se trouve dans un emplacement différent de celui du fichier de configuration local.</div><pre class="code-block">default: /etc/pgbackrest/pgbackrest.conf
example: pg1-host-config=/conf/pgbackrest/pgbackrest.conf</pre><div class="section-body-text">Nom obsolète: db-config</div></div></div><div class="section2"><a id="section-stanza/option-pg-host-config-include-path"></a><div class="section2-header"><div class="section2-number">8.4</div><div class="section2-title">Hôte PostgreSQL Chemin inclusion Configuration (<span class="id">--pg-host-config-include-path</span>)</div></div><div class="section-body"><div class="section-body-text">Chemin d'inclusion de la configuration <span class="backrest">pgBackRest</span> sur l'hôte.</div><div class="section-body-text">Définit l'emplacement du chemin d'inclusion de la configuration sur l'hôte <span class="postgres">PostgreSQL</span>. Ceci n'est requis que si le chemin d'inclusion de la configuration de l'hôte <span class="postgres">PostgreSQL</span> se trouve à un endroit différent du chemin d'inclusion de la configuration locale.</div><pre class="code-block">default: /etc/pgbackrest/conf.d
example: pg1-host-config-include-path=/conf/pgbackrest/conf.d</pre></div></div><div class="section2"><a id="section-stanza/option-pg-host-config-path"></a><div class="section2-header"><div class="section2-number">8.5</div><div class="section2-title">Hôte PostgreSQL Chemin Configuration (<span class="id">--pg-host-config-path</span>)</div></div><div class="section-body"><div class="section-body-text">Chemin de configuration <span class="backrest">pgBackRest</span> de l'hôte de base de données.</div><div class="section-body-text">Définit l'emplacement du chemin de configuration sur l'hôte <span class="postgres">PostgreSQL</span>. Ceci n'est requis que si le chemin de configuration de l'hôte <span class="postgres">PostgreSQL</span> se trouve dans un emplacement différent du chemin de configuration local.</div><pre class="code-block">default: /etc/pgbackrest
example: pg1-host-config-path=/conf/pgbackrest</pre></div></div><div class="section2"><a id="section-stanza/option-pg-host-port"></a><div class="section2-header"><div class="section2-number">8.6</div><div class="section2-title">Hôte PostgreSQL Port (<span class="id">--pg-host-port</span>)</div></div><div class="section-body"><div class="section-body-text">Port de l'hôte <span class="postgres">PostgreSQL</span> lorsque <span class="br-setting">pg-host</span> est configuré.</div><div class="section-body-text">Utiliser cette option pour spécifier un port non par défaut pour le protocole hôte <span class="postgres">PostgreSQL</span>. Actuellement, seul le protocole SSH est pris en charge</div><pre class="code-block">allowed: 0-65535
example: pg1-host-port=25</pre><div class="section-body-text">Nom obsolète: db-ssh-port</div></div></div><div class="section2"><a id="section-stanza/option-pg-host-user"></a><div class="section2-header"><div class="section2-number">8.7</div><div class="section2-title">Hôte PostgreSQL Utilisateur (<span class="id">--pg-host-user</span>)</div></div><div class="section-body"><div class="section-body-text">Utilisateur de connexion <span class="postgres">PostgreSQL</span> lorsque <span class="br-setting">pg-host</span> est défini.</div><div class="section-body-text">Cet utilisateur sera également propriétaire du processus distant <span class="backrest">pgBackRest</span> et initiera les connexions à <span class="postgres">PostgreSQL</span>. Pour que cela puisse fonctionner correctement, l'utilisateur doit être le propriétaire de l'instance de base de données <span class="postgres">PostgreSQL</span>, qui est généralement par défaut <span class="id">postgres</span>.</div><pre class="code-block">default: postgres
example: pg1-host-user=db_owner</pre><div class="section-body-text">Nom obsolète: db-user</div></div></div><div class="section2"><a id="section-stanza/option-pg-path"></a><div class="section2-header"><div class="section2-number">8.8</div><div class="section2-title">PostgreSQL Chemin (<span class="id">--pg-path</span>)</div></div><div class="section-body"><div class="section-body-text"><span class="postgres">PostgreSQL</span> data directory.</div><div class="section-body-text">Ce paramètre doit être le même que le paramètre <span class="br-setting">data_directory</span> du fichier <span class="file">postgresql.conf</span>. Même si cette valeur peut être lue à partir de <span class="file">postgresql.conf</span> ou <span class="postgres">PostgreSQL</span>, il est conseillé de la définir au cas où ces ressources ne seraient pas disponibles pendant un scénario de restauration ou de sauvegarde hors ligne.<br/>
<br/>
L'option <span class="br-setting">pg-path</span> est testée par rapport à la valeur indiquée par <span class="postgres">PostgreSQL</span> à chaque sauvegarde en ligne, elle doit donc toujours être à jour.</div><pre class="code-block">example: pg1-path=/data/db</pre><div class="section-body-text">Nom obsolète: db-path</div></div></div><div class="section2"><a id="section-stanza/option-pg-port"></a><div class="section2-header"><div class="section2-number">8.9</div><div class="section2-title">PostgreSQL Port (<span class="id">--pg-port</span>)</div></div><div class="section-body"><div class="section-body-text">Port <span class="postgres">PostgreSQL</span>.</div><div class="section-body-text">Port sur lequel <span class="postgres">PostgreSQL</span> écoute. Il n'est généralement pas nécessaire de le préciser car la plupart des instances <span class="postgres">PostgreSQL</span> fonctionnent sur le port par défaut.</div><pre class="code-block">default: 5432
allowed: 0-65535
example: pg1-port=6543</pre><div class="section-body-text">Nom obsolète: db-port</div></div></div><div class="section2"><a id="section-stanza/option-pg-socket-path"></a><div class="section2-header"><div class="section2-number">8.10</div><div class="section2-title">PostgreSQL Emplacement Socket Unix (<span class="id">--pg-socket-path</span>)</div></div><div class="section-body"><div class="section-body-text">Emplacement socket unix <span class="postgres">PostgreSQL</span>.</div><div class="section-body-text">Le répertoire de la socket unix qui a été spécifié au démarrage de <span class="postgres">PostgreSQL</span>. <span class="backrest">pgBackRest</span> trouvera automatiquement l'emplacement standard pour votre système d'exploitation, il n'est donc généralement pas nécessaire de spécifier ce paramètre, sauf si le répertoire des sockets a été explicitement modifié avec le paramètre <span class="br-setting">unix_socket_directory</span> dans <span class="file">postgresql.conf</span>.</div><pre class="code-block">allowed: 0-65535
example: pg1-socket-path=/var/run/postgresql</pre><div class="section-body-text">Nom obsolète: db-socket-path</div></div></div><div class="section2"><a id="section-stanza/option-pg-user"></a><div class="section2-header"><div class="section2-number">8.11</div><div class="section2-title">PostgreSQL Utilisateur Base de données (<span class="id">--pg-user</span>)</div></div><div class="section-body"><div class="section-body-text">Nom d'utilisateur de base de données <span class="postgres">PostgreSQL</span>.</div><div class="section-body-text">Le nom d'utilisateur de la base de données utilisé lors de la connexion à <span class="postgres">PostgreSQL</span>. S'il n'est pas spécifié, <span class="backrest">pgBackRest</span> se connectera avec l'utilisateur du système d'exploitation local ou <span class="id">PGUSER</span>.</div><pre class="code-block">example: pg1-user=backupuser</pre></div></div></div></div></div><div class="page-footer">Copyright &copy; 2015-2020, The PostgreSQL Global Development Group, <a href="https://github.com/pgbackrest/pgbackrest/blob/master/LICENSE">MIT License</a>.  Updated July 2, 2020</div></body></html>